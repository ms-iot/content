<div class="medium-editor"><h3>//构建： 动手实验 WeatherStation</h3><p>来自 Windows 10 中通用 Windows 平台 (UWP) API 的新 Windows.Devices 命名空间，使开发人员能够在通过传感器和传动装置与现实世界交互时利用 Windows 的强大功能。</p><p>此项目使用 I2C 总线及 Raspberry Pi 2 上的常规用途输入/输出 (GPIO) 端口，以使用 SparkFun 天气防护罩创建连接至 Internet 的气象站。</p><p>提供的说明将给予开发人员第一手资料，以供其设置所需硬件，以及编写和调试最新可用的 Windows 10 及 UWP Windows.Devices API。此实验还将演示如何通过易于使用的 ConnectTheDots API 并使用 Azure 事件中心聚合云中的数据。</p><h3>硬件</h3><p>Raspberry Pi 2 到 Sparkfun 天气防护罩连线</p>

<img src="https://hackster.imgix.net/uploads/image/file/41175/RaspberryPi2_gpio_schematic.png?w=1280&h=960&fit=clip&s=21cb5f2ffb260c690f9f885e923ee416">
<p>GPIO 示意图（用方形焊盘标记 pin 1）</p>
<img src="https://hackster.imgix.net/uploads/image/file/42317/Wiring_RasPi2_inside.JPG?w=1280&h=960&fit=clip&s=5cf291c7ac497e0e51ede730fe593419">
<p>内部围栏的连线特写（棕色、黄色、橙色、绿色、蓝色）</p>
<img src="https://hackster.imgix.net/uploads/image/file/42318/Wiring_RasPi2_outside.JPG?w=1280&h=960&fit=clip&s=7adc3db569cf8bb87a55f2e55db1a2a2">
<p>外部围栏的连线特写（黑色、红色）</p>
<img src="https://hackster.imgix.net/uploads/image/file/42319/Wiring_WeatherShield_LeftRail.JPG?w=1280&h=960&fit=clip&s=b7d405085980003ccaf7f2bf7ee79131">
<p>左侧围栏的连线特写（蓝色、绿色、黄色、橙色）</p>
<img src="https://hackster.imgix.net/uploads/image/file/42320/Wiring_WeatherShield_RightRail.JPG?w=1280&h=960&fit=clip&s=4a5046341fcf149c50377be9c6a307d7">
<p>右侧围栏的连线特写（棕色、黑色、红色）</p>
<p><b>引脚分配图</b> <i>（Raspberry Pi 2 --> Sparkfun 天气防护罩）</i>：</p><ul> <li>GND---（<em style="line-height: 1.428571429;">黑色</em>）---GND<br> </li> <li>5V----------（<em style="line-height: 1.428571429;">红色</em>）---------VIN<br> </li> <li>3V3-------（<em style="line-height: 1.428571429;">棕色</em>）------5V<em style="line-height: 1.428571429;">（防护罩攻击；不是印刷错误）</em><br> </li> <li>GPIO2-----（<em style="line-height: 1.428571429;">黄色</em>）----SDA<br> </li> <li>GPIO3----（<em style="line-height: 1.428571429;">橙色</em>）----SCL<br> </li> <li>GPIO5-----（<em style="line-height: 1.428571429;">绿色</em>）-----D8<br> </li> <li>GPIO6-----（<em style="line-height: 1.428571429;">蓝色</em>）-------D7<br> </li> </ul> <!--StartFragment--><!--EndFragment--><h3>软件</h3><p>当自行完成实验时，查找“//TODO:”列表</p>

<img src="https://hackster.imgix.net/uploads/image/file/44763/TaskList.png?w=1280&h=960&fit=clip&s=458c5033b6d3e9ab831ad1d15e8956bf">
<p>启用 \"Task List\"显示</p>
<img src="https://hackster.imgix.net/uploads/image/file/44764/GoToTask.png?w=1280&h=960&fit=clip&s=c948f27d98680990958da692b21a1b29">
<p>双击列表中的任意项，然后直接跳转到源！</p>
<img src="https://hackster.imgix.net/uploads/image/file/44767/Incomplete_code.png?w=1280&h=960&fit=clip&s=54e7f3795bcb03472d215285278167c9">
<p>每个 //TODO: 的前面带有注释和提示以帮助您完成缺少的部分。</p>

<h4>安装气象站应用程序：</h4><p>复制链接存储库</p><ul> <li>如果你想要了解新 UWP Windows.Devices API 并自行完成代码，请选择“实验”<b></b>分支（默认<i></i>）</li> <li>如果你需要完整的代码，请选择“主”<b></b>分支<br> </li> </ul><p>在 Visual Studio 2015 中，打开“WeatherStation\WeatherStation.sln”<b></b></p><p>导航到“解决方案资源管理器”<b></b>窗格中的“WeatherShield.cs”<b></b></p><p>如果你选择“实验”分支，请导航到“查看 >> 其他窗口 >> 任务列表”<b></b>，以查看剩余工作（如上图所示）。</p><p class="">    你会注意到：注释中有很多详细信息可帮助你完成此任务。然而，如果你仍然需要额外帮助，将提供“提示”以提醒你查看旁边的帮助代码（如上图所示）。</p>    <p>完成 //TODO: 后，单击“调试”<b></b>菜单项，然后选择“气象站属性...”<b></b></p><p>在“调试”<b></b>选项卡上，在“开始选项”<b></b>部分</p><ol> <li>选择“远程设备”<b></b>作为“目标设备:”<b></b></li> <li>在“远程计算机:”<b></b>字段中输入你的 Windows IoT 核心设备的 IP 地址</li> </ol><p>部署到 Windows IoT 核心设备</p><h4>接口和/或调试应用程序：</h4><ul> <li>在“WeatherStationTask.cs”<b></b>中的“PopulateWeatherData”<b></b>函数内，设置中断点</li> <li>遍历发生的各个 I2C 事务</li> </ul><p>或者</p><ul><li>在 Internet 浏览器窗口中，在 50001 端口上 Ping Windows IoT 核心设备的 IP 地址（即 http://<i>xxx</i>.<i>xxx</i>.<i>xxx</i>.<i>xxx</i>:50001）</li></ul><h3>集成 ConnectTheDots：</h3><p>网站上的 UI 示例</p>
<img src="https://hackster.imgix.net/uploads/image/file/44501/ConnectTheDotsLabOverview.PNG?w=1280&h=960&fit=clip&s=e8cc76e43b69c442e578e142e66664fd"> <img src="https://hackster.imgix.net/uploads/image/file/44502/ConnectTheDotsLab2.PNG?w=1280&h=960&fit=clip&s=6bdaea1576a39c2aefffb79069a25327">
<p>如果你想要了解如何使用 ConnectTheDots 并自行完成代码，请选择“lab_ConnectTheDots”<b style="font-size: 18px; line-height: 1.428571429;"></b>分支</p><p>在 Visual Studio 2015 中，打开“WeatherStation\WeatherStation.sln”<b></b></p><p>导航到“解决方案资源管理器”<b></b>窗格中的“WeatherStationTask.cs”<b></b></p><p>使用“任务列表”跳转到每个“//TODO:”<b></b>并编写必要的代码</p><p class="">AppSettings、ConnectTheDotsSensor 和 ConnectTheDotsHelper 文件是已创建代码的所有组成部分，可帮助你使用到 Azure 事件中心的 ConnectTheDots 接口。</p><p class=""><b>AppSettings：</b> 保存连接到事件中心的设置</p><ul> <li><i style="line-height: 1.428571429;">服务总线命名空间</i></li> <li><i style="line-height: 1.428571429;">事件中心名称</i></li> <li><i style="line-height: 1.428571429;">键名称</i></li> <li><i style="line-height: 1.428571429;">键</i></li> <li><i style="line-height: 1.428571429;">显示名称</i></li> <li><i style="line-height: 1.428571429;">组织</i></li> <li> <i style="line-height: 1.428571429;">位置</i><br> </li> </ul><p class=""><b>ConnectTheDotsSensor：</b> 包含用于传感器的信息</p><ul> <li><i style="line-height: 1.428571429;">guid</i></li> <li><i style="line-height: 1.428571429;">显示名称</i></li> <li><i style="line-height: 1.428571429;">组织</i></li> <li><i style="line-height: 1.428571429;">位置</i></li> <li><i style="line-height: 1.428571429;">度量值名称</i></li> <li><i style="line-height: 1.428571429;">度量单位</i></li> <li><i style="line-height: 1.428571429;">创建时间</i></li> <li> <i style="line-height: 1.428571429;">值</i><br> </li> </ul><p class=""><b>ConnectTheDotsHelper：</b> 初始化事件中心的帮助程序功能</p><ul> <li>建立连接</li> <li>创建身份验证令牌</li> </ul><p class="">如果你想要设置你自己的事件中心后端，请按照 ConnectTheDots GitHub 存储库（链接如下）中的说明进行操作。</p><p class="">将其部署后，它应该开始向事件中心发送数据，并可通过<a href="http://iotbuildlab.azurewebsites.net/" target="_blank" rel="nofollow"> http://iotbuildlab.azurewebsites.net/</a> 或你自己的网站查看该数据。</p><p class="paragraph--empty"><br></p>

<iframe width="100%" height="100%" src="//www.youtube.com/embed/Hkm4THS3Rf8?rel=0" frameborder="0" allowfullscreen=""></iframe>